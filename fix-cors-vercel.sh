#!/bin/bash

echo "ğŸ”´ PROBLÃˆME CORS IDENTIFIÃ‰"
echo "=========================="
echo ""
echo "Le frontend Vercel (gj-camp-website-3fuu.vercel.app) ne peut pas"
echo "communiquer avec le backend Render car CORS bloque les requÃªtes."
echo ""
echo "CAUSE:"
echo "------"
echo "Le backend n'autorise que: https://www.gjsdecrpt.fr"
echo "Mais vous accÃ©dez via: https://gj-camp-website-3fuu.vercel.app"
echo ""
echo "SOLUTION:"
echo "---------"
echo "Ajouter les DEUX URLs dans la variable FRONTEND_URL sur Render"
echo ""
echo "ğŸ“‹ Ã‰TAPES Ã€ SUIVRE:"
echo ""
echo "1ï¸âƒ£ Allez sur https://dashboard.render.com"
echo ""
echo "2ï¸âƒ£ SÃ©lectionnez le service 'gj-camp-website-1' (backend)"
echo ""
echo "3ï¸âƒ£ Cliquez sur 'Environment'"
echo ""
echo "4ï¸âƒ£ Trouvez la variable FRONTEND_URL et modifiez-la:"
echo ""
echo "   Ancienne valeur:"
echo "   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "   â”‚ https://www.gjsdecrpt.fr            â”‚"
echo "   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo "   Nouvelle valeur (ajoutez une virgule et la 2Ã¨me URL):"
echo "   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "   â”‚ https://www.gjsdecrpt.fr,https://gj-camp-website-3fuu.vercel.app â”‚"
echo "   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo "5ï¸âƒ£ Cliquez 'Save Changes'"
echo ""
echo "6ï¸âƒ£ Render va automatiquement redÃ©marrer le backend (1-2 minutes)"
echo ""
echo "7ï¸âƒ£ Attendez que le status passe Ã  'Live' (point vert)"
echo ""
echo "âœ… VÃ‰RIFICATION:"
echo ""
echo "Une fois le backend redÃ©marrÃ©:"
echo "   1. Rechargez https://gj-camp-website-3fuu.vercel.app"
echo "   2. Appuyez sur F12 â†’ Console"
echo "   3. Les erreurs CORS doivent disparaÃ®tre"
echo "   4. Le carrousel doit afficher les images Cloudinary"
echo "   5. Le logo doit s'afficher"
echo "   6. La connexion doit fonctionner"
echo ""
echo "ğŸ’¡ ASTUCE:"
echo "Pour Ã©viter ce problÃ¨me, utilisez toujours votre domaine:"
echo "   https://www.gjsdecrpt.fr"
echo "au lieu de l'URL Vercel directe."
echo ""

# Test CORS aprÃ¨s modification
echo "ğŸ” TEST CORS (aprÃ¨s avoir fait la modification):"
echo ""
echo "ExÃ©cutez cette commande pour vÃ©rifier:"
echo ""
echo "curl -I -H \"Origin: https://gj-camp-website-3fuu.vercel.app\" \\"
echo "  https://gj-camp-website-1.onrender.com/api/health"
echo ""
echo "Vous devriez voir:"
echo "  access-control-allow-origin: https://gj-camp-website-3fuu.vercel.app"
echo ""
